import{r as n,a as R,j as e}from"./index-c9016a42.js";import{I as T}from"./index.esm-058a98d1.js";import{b as _}from"./index.esm-fa651420.js";const P=({props:s,closeFromChild:g})=>{const{reviewNr:C,setReviewNr:E}=n.useContext(R),[b,I]=n.useState(!0),[a,j]=n.useState(),[c,y]=n.useState(""),[d,S]=n.useState(""),[N,L]=n.useState(!1),[h,v]=n.useState([]),[M,B]=n.useState(0);n.useEffect(()=>{B(document.body.scrollHeight+92),s.stars&&o(s.stars-1),s.review[0]&&y(s.review[0]),s.review[1]&&S(s.review[1])},[]);const i=r=>{if(b){const u=document.getElementById("review_first_star"),m=document.getElementById("review_second_star"),f=document.getElementById("review_third_star"),x=document.getElementById("review_forth_star"),w=document.getElementById("review_fifth_star"),l=[u,m,f,x,w];if(r[0]==="enter"){j(r[1]);for(let t=0;t<=r[1];t++)l[t]&&(l[t].style.color="#f9bf3b")}else l.forEach(t=>{t&&(t.style.color="rgb(216, 216, 216)")})}},o=r=>{const u=document.getElementById("review_first_star"),m=document.getElementById("review_second_star"),f=document.getElementById("review_third_star"),x=document.getElementById("review_forth_star"),w=document.getElementById("review_fifth_star"),l=[u,m,f,x,w];for(let t=0;t<=4;t++)u&&m&&f&&x&&w&&(l[t].style.color="rgb(216, 216, 216)");for(let t=0;t<=r;t++)u&&m&&f&&x&&w&&(l[t].style.color="#f9bf3b");I(!1),j(r),L(!0)},k=()=>{d?d.length<10&&v("contentLength"):v("addContent"),c?c.length<10&&v("titleLength"):v("addTitle"),N||v("stars"),N&&c.length>10&&d.length>10&&(s.stars=a+1,s.review[0]=[c],s.review[1]=[d],g(!1),C.includes(s.id)||E(r=>[...r,s.id]))};return e.jsx("div",{className:"review_blur",style:{height:M},children:e.jsxs("div",{className:"review_container",children:[e.jsxs("div",{className:"review_prod_details",children:[e.jsxs("div",{className:"review_image_and_title",children:[e.jsx("div",{className:"review_image",children:e.jsx("img",{src:s.image})}),e.jsxs("div",{className:"review_title_title",children:[e.jsx("h1",{children:"Add a review for:"}),e.jsxs("p",{className:"",children:[s.name.slice(0,60),"..."]})]})]}),e.jsx("div",{className:"review_close_icon",onClick:()=>g(!1),children:e.jsx(T,{})})]}),e.jsxs("div",{className:"review_main",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"review_stars_conatiner",children:[e.jsxs("div",{className:"review_stars",children:[e.jsx("span",{onMouseOver:()=>i(["enter",0]),onMouseLeave:()=>i(["exit","first"]),onClick:()=>o(0),children:e.jsx(_,{id:"review_first_star"})}),e.jsx("span",{onMouseOver:()=>i(["enter",1]),onMouseLeave:()=>i(["exit","first"]),onClick:()=>o(1),children:e.jsx(_,{id:"review_second_star"})}),e.jsx("span",{onMouseOver:()=>i(["enter",2]),onMouseLeave:()=>i(["exit","first"]),onClick:()=>o(2),children:e.jsx(_,{id:"review_third_star"})}),e.jsx("span",{onMouseOver:()=>i(["enter",3]),onMouseLeave:()=>i(["exit","first"]),onClick:()=>o(3),children:e.jsx(_,{id:"review_forth_star"})}),e.jsx("span",{onMouseOver:()=>i(["enter",4]),onMouseLeave:()=>i(["exit","first"]),onClick:()=>o(4),children:e.jsx(_,{id:"review_fifth_star"})})]}),e.jsx("h1",{children:a===0?"Terrible":a===1?"Poor":a===2?"Average":a===3?"Good":a===4?"Excellent":"Assign a rating"})]}),h==="stars"?e.jsx("h2",{className:"review_stars_error",children:"Please add your rating"}):null]}),e.jsxs("div",{className:"review_title_riveiw",children:[e.jsx("h1",{children:"Review title:"}),e.jsx("input",{value:c,type:"text",maxLength:"50",placeholder:"Use a suggestion or write your own title",onChange:r=>{y(r.target.value)}}),h==="addTitle"?e.jsx("h2",{className:"review_title_error",children:"What's that matter of a review without title? :)"}):null,h==="titleLength"?e.jsx("h2",{className:"review_title_error",children:"Please add a longer title"}):null]}),e.jsxs("div",{className:"review_main_review",children:[e.jsx("h1",{children:"Review:"}),e.jsx("textarea",{value:d,id:"customInput",maxLength:"200",onChange:r=>S(r.target.value),placeholder:`Tell us about your experience
• Does it meet your expectations? 
• Are you satisfied with the quality-to-price ratio?
• Would you recommend it to others?`,rows:"6"}),h==="addContent"?e.jsx("h2",{className:"review_textarea_error",children:"Write something interesting :)"}):null,h==="contentLength"?e.jsx("h2",{className:"review_textarea_error",children:"Please add a longer product description"}):null,e.jsx("p",{children:"Experiencing issues with the product or delivery? Submit a report"}),e.jsx("p",{children:"By submitting the review, you agree to the terms and conditions of the website"})]}),e.jsx("button",{className:"review_submit_button",onClick:()=>k(),children:"Add review"})]})]})})};export{P as default};
